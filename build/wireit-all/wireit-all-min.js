YUI().use(function(e){var t={groups:{wireit:{base:"wireit/src/",combine:!1,modules:{"arrow-wire":{requires:["wire-base"]},"bezier-wire":{requires:["wire-base"]},"bidirectional-arrow-wire":{requires:["wire-base"]},container:{requires:["container-base","widget-icons"],skinnable:!0},"container-base":{requires:["overlay","widget-parent","widget-child","dd","resize","terminal","wires-delegate"]},"form-container":{requires:["container","inputex-wirable-fields"],skinnable:!0},"image-container":{requires:["container"],skinnable:!0},"inout-container":{requires:["container"]},"inputex-wirable":{requires:["terminal","inputex-field"]},"inputex-wirable-fields":{requires:["inputex-wirable","inputex-group","inputex-string","inputex-list"]},layer:{requires:["widget-parent","container","wires-delegate"],skinnable:"true"},"straight-wire":{requires:["wire-base"]},terminal:{requires:["terminal-base","terminal-dragedit","terminal-scissors","terminal-ddgroups"],skinnable:!0},"terminal-base":{requires:["widget","widget-child","widget-position","widget-position-align","wire-base","wires-delegate"]},"terminal-ddgroups":{requires:["terminal-dragedit"]},"terminal-dragedit":{requires:["bezier-wire","dd-drop","dd-drag","dd-proxy"]},"terminal-input":{requires:["terminal"]},"terminal-output":{requires:["terminal"]},"terminal-scissors":{requires:["overlay"],skinnable:!0},"textarea-container":{requires:["container"]},"widget-icons":{requires:[],skinnable:!0},"wire-base":{requires:["graphics"],skinnable:!0},"wireit-app":{requires:["app","handlebars","model","model-list","json","view","layer","bezier-wire","anim"]},"wires-delegate":{requires:["wire-base"]}}}}};if(typeof YUI_config=="undefined")YUI_config={groups:{}};else if(YUI_config.groups.inputex)for(var n in YUI_config.groups.inputex.modules)if(YUI_config.groups.inputex.modules.hasOwnProperty(n)){var r=YUI_config.groups.inputex.modules[n];if(r.requires){var i=r.requires.indexOf("inputex-field");i!=-1&&(r.requires[i]="inputex-wirable")}}e.mix(YUI_config.groups,t.groups)}),YUI.add("arrow-wire",function(e,t){"use strict";e.ArrowWire=function(t){e.ArrowWire.superclass.constructor.apply(this,arguments)},e.ArrowWire.NAME="arrowwire",e.extend(e.ArrowWire,e.WireBase,{_draw:function(){var e=7,t=e+3,n=[4+t,4+t],r=this.get("src").getXY(),i=this.get("tgt").getXY(),s=Math.sqrt(Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2));this.moveTo(r[0]+6,r[1]+6),this.lineTo(i[0]+6,i[1]+6);var o=[0,0],u=20,a=s===0?0:1-u/s;o[0]=Math.abs(r[0]+a*(i[0]-r[0])),o[1]=Math.abs(r[1]+a*(i[1]-r[1]));var f=r[0]-i[0],l=r[1]-i[1],c=r[0]*i[1]-r[1]*i[0],h,p,d,v;f!==0?(h=l/f,p=c/f):h=0,h===0?d=0:d=-1/h,v=o[1]-d*o[0];var m=1+Math.pow(d,2),g=2*d*v-2*o[0]-2*o[1]*d,y=-2*o[1]*v+Math.pow(o[0],2)+Math.pow(o[1],2)-Math.pow(e,2)+Math.pow(v,2),b=Math.pow(g,2)-4*m*y;if(b<0)return;var w=(-g+Math.sqrt(b))/(2*m),E=(-g-Math.sqrt(b))/(2*m),S=d*w+v,x=d*E+v;if(r[1]===i[1]){var T=r[0]>i[0]?1:-1;w=i[0]+T*u,E=w,S-=e,x+=e}this.moveTo(i[0]+6,i[1]+6),this.lineTo(w+6,S+6),this.moveTo(i[0]+6,i[1]+6),this.lineTo(E+6,x+6),this.end()}}),e.ArrowWire.ATTRS=e.merge(e.WireBase.ATTRS,{})},"@VERSION@",{requires:["wire-base"]}),YUI.add("bezier-wire",function(e,t){e.BezierWire=function(t){e.BezierWire.superclass.constructor.apply(this,arguments)},e.BezierWire.NAME="bezierwire",e.extend(e.BezierWire,e.WireBase,{_draw:function(){this.clear();var e=this.get("src").getXY(),t=this.get("tgt").getXY(),n=this.get("srcDir"),r=this.get("tgtDir"),i=this.get("bezierTangentNorm"),s=7;this.moveTo(e[0]+s,e[1]+s),this.curveTo(e[0]+s+n[0]*i,e[1]+s+n[1]*i,t[0]+s+r[0]*i,t[1]+s+r[1]*i,t[0]+s,t[1]+s),this.end()},SERIALIZABLE_ATTRS:["color","width","bezierTangentNorm"]}),e.BezierWire.ATTRS=e.merge(e.WireBase.ATTRS,{bezierTangentNorm:{setter:function(e){return parseInt(e,10)},value:200}})},"@VERSION@",{requires:["wire-base"]}),YUI.add("bidirectional-arrow-wire",function(e,t){e.BidirectionalArrowWire=function(t){e.BidirectionalArrowWire.superclass.constructor.apply(this,arguments)},e.BidirectionalArrowWire.NAME="bidirectionalarrowwire",e.extend(e.BidirectionalArrowWire,e.WireBase,{_draw:function(){var e=7,t=e+3,n=[4+t,4+t],r=this.get("src").getXY(),i=this.get("tgt").getXY(),s=Math.sqrt(Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2));this.moveTo(r[0]+6,r[1]+6),this.lineTo(i[0]+6,i[1]+6);var o=r,u=i,f=[0,0],l=20,c=s===0?0:1-l/s;f[0]=Math.abs(o[0]+c*(u[0]-o[0])),f[1]=Math.abs(o[1]+c*(u[1]-o[1]));var h=o[0]-u[0],p=o[1]-u[1],d=o[0]*u[1]-o[1]*u[0];h!==0?(a=p/h,b=d/h):a=0,a===0?aProst=0:aProst=-1/a,bProst=f[1]-aProst*f[0];var v=1+Math.pow(aProst,2),m=2*aProst*bProst-2*f[0]-2*f[1]*aProst,g=-2*f[1]*bProst+Math.pow(f[0],2)+Math.pow(f[1],2)-Math.pow(e,2)+Math.pow(bProst,2),y=Math.pow(m,2)-4*v*g;if(y<0)return;var w=(-m+Math.sqrt(y))/(2*v),E=(-m-Math.sqrt(y))/(2*v),S=aProst*w+bProst,x=aProst*E+bProst;if(o[1]==u[1]){var T=o[0]>u[0]?1:-1;w=u[0]+T*l,E=w,S-=e,x+=e}this.moveTo(u[0]+6,u[1]+6),this.lineTo(w+6,S+6),this.moveTo(u[0]+6,u[1]+6),this.lineTo(E+6,x+6),o=i,u=r;var f=[0,0],l=20,c=s==0?0:1-l/s;f[0]=Math.abs(o[0]+c*(u[0]-o[0])),f[1]=Math.abs(o[1]+c*(u[1]-o[1]));var h=o[0]-u[0],p=o[1]-u[1],d=o[0]*u[1]-o[1]*u[0];h!==0?(a=p/h,b=d/h):a=0,a==0?aProst=0:aProst=-1/a,bProst=f[1]-aProst*f[0];var v=1+Math.pow(aProst,2),m=2*aProst*bProst-2*f[0]-2*f[1]*aProst,g=-2*f[1]*bProst+Math.pow(f[0],2)+Math.pow(f[1],2)-Math.pow(e,2)+Math.pow(bProst,2),y=Math.pow(m,2)-4*v*g;if(y<0)return;var w=(-m+Math.sqrt(y))/(2*v),E=(-m-Math.sqrt(y))/(2*v),S=aProst*w+bProst,x=aProst*E+bProst;if(o[1]==u[1]){var T=o[0]>u[0]?1:-1;w=u[0]+T*l,E=w,S-=e,x+=e}this.moveTo(u[0]+6,u[1]+6),this.lineTo(w+6,S+6),this.moveTo(u[0]+6,u[1]+6),this.lineTo(E+6,x+6),this.end()}}),e.BidirectionalArrowWire.ATTRS=e.merge(e.WireBase.ATTRS,{})},"@VERSION@",{requires:["wire-base"]}),YUI.add("container",function(e,t){"use strict";e.Container=e.Base.create("container",e.ContainerBase,[e.WidgetIcons],{_onCloseClick:function(){this.destroy()}},{ATTRS:{icons:{value:[{title:"close",click:"_onCloseClick",className:"ui-silk ui-silk-cancel"}]}}})},"@VERSION@",{requires
:["container-base","widget-icons"],skinnable:!0}),YUI.add("container-base",function(e,t){var n=e.Base.create("container-base",e.Overlay,[e.WidgetParent,e.WidgetChild,e.WiresDelegate],{renderUI:function(){this.drag=new e.DD.Drag({node:this.get("boundingBox"),handles:[this._findStdModSection(e.WidgetStdMod.HEADER)]}),this.drag.on("drag:drag",function(){this.redrawAllWires()},this);if(this.get("resizable")){var t=this.get("contentBox"),n=new e.Resize({node:t,handles:"br"});n.on("resize:resize",function(){this._fillHeight(),this.alignTerminals(),this.redrawAllWires()},this),this.resize=n}e.later(200,this,function(){this.alignTerminals()})},alignTerminals:function(){var e=this.get("contentBox");this.each(function(t){t.get("align")&&t.align(t.get("alignNode")||e,["tl",t.get("align").points[1]])},this)},syncUI:function(){var e=this;this.each(function(t){t.get("align")&&t.align(e.get("contentBox"),["tl",t.get("align").points[1]])})},SERIALIZABLE_ATTRS:["x","y"],toJSON:function(){var t={},n=this;return e.Array.each(this.SERIALIZABLE_ATTRS,function(e){t[e]=n.get(e)}),t},getTerminal:function(t){return e.Array.find(this._items,function(e){if(e.get("name")==t)return!0})},destructor:function(){this.drag.destroy(),this.resize&&this.resize.destroy()}},{ATTRS:{defaultChildType:{value:"Terminal"},zIndex:{value:5},resizable:{value:!0},fillHeight:{value:!0},preventSelfWiring:{value:!0}},EIGHT_POINTS:[{align:{points:["tl","tl"]},dir:[-0.5,-0.5],name:"tl"},{align:{points:["tl","tc"]},dir:[0,-1],name:"tc"},{align:{points:["tl","tr"]},dir:[.5,-0.5],name:"tr"},{align:{points:["tl","lc"]},dir:[-1,0],name:"lc"},{align:{points:["tl","rc"]},dir:[1,0],name:"rc"},{align:{points:["tl","br"]},dir:[.5,.5],name:"br"},{align:{points:["tl","bc"]},dir:[0,1],name:"bc"},{align:{points:["tl","bl"]},dir:[-0.5,.5],name:"bl"}],FOUR_CORNERS:[{align:{points:["tl","tl"]},dir:[-0.5,-0.5],name:"tl"},{align:{points:["tl","tr"]},dir:[.5,-0.5],name:"tr"},{align:{points:["tl","br"]},dir:[.5,.5],name:"br"},{align:{points:["tl","bl"]},dir:[-0.5,.5],name:"bl"}],FOUR_EDGES:[{align:{points:["tl","tc"]},dir:[0,-1],name:"tc"},{align:{points:["tl","lc"]},dir:[-1,0],name:"lc"},{align:{points:["tl","rc"]},dir:[1,0],name:"rc"},{align:{points:["tl","bc"]},dir:[0,1],name:"bc"}]});e.ContainerBase=n},"@VERSION@",{requires:["overlay","widget-parent","widget-child","dd","resize","terminal","wires-delegate"]}),YUI.add("form-container",function(e,t){e.FormContainer=e.Base.create("form-container",e.Container,[],{renderUI:function(){e.FormContainer.superclass.renderUI.call(this),this._renderForm()},_renderForm:function(){this.after("bodyContentChange",function(){var t=this.getStdModNode(e.WidgetStdMod.BODY).one(".inputex-container")._node,n=this;this.form=new e.inputEx.Group({parentEl:t,fields:(new e.Array(this.get("fields"))).map(function(t){return e.mix({container:n},t)})}),this.form.setValue(this.get("value")),this.alignTerminals()},this)},SERIALIZABLE_ATTRS:e.Container.prototype.SERIALIZABLE_ATTRS.concat(["value"])},{ATTRS:{value:{setter:function(e){if(this.form)return this.form.setValue(e)},getter:function(){return this.form?this.form.getValue():{}}},bodyContent:{value:'<div class="inputex-container" />'},fields:{value:[]}}})},"@VERSION@",{requires:["container","inputex-wirable-fields"],skinnable:!0}),YUI.add("image-container",function(e,t){e.ImageContainer=e.Base.create("image-container",e.Container,[],{renderUI:function(){var t=e.Node.create('<img src="'+this.get("imageUrl")+'" width="'+this.get("width")+'"  height="'+this.get("height")+'"/>');t.appendTo(this.get("contentBox")),this.image=t,this.image.once("load",function(){this.alignTerminals(),this.redrawAllWires()},this),this.drag=new e.DD.Drag({node:this.get("boundingBox"),handles:[t]}),this.drag.on("drag:drag",function(){this.redrawAllWires()},this);if(this.get("resizable")){var n=this.get("contentBox"),r=new e.Resize({node:n,handles:"br"});r.on("resize:resize",function(e){this._fillHeight();var t=e.details[0].info,r=t.right-t.left,i=t.bottom-t.top;this.image.set("width",r),this.image.set("height",i),this.each(function(e){e.get("align")&&e.align(n,["tl",e.get("align").points[1]])},this),this.redrawAllWires()},this)}}},{ATTRS:{imageUrl:{value:"",setter:function(e){this.image&&this.image.set("src",e)}},zIndex:{value:5}}})},"@VERSION@",{requires:["container"],skinnable:!0}),YUI.add("inout-container",function(e,t){e.InOutContainer=e.Base.create("inout-container",e.Container,[],{renderUI:function(){e.InOutContainer.superclass.renderUI.call(this),this._renderInputsOutputs()},_renderInputsOutputs:function(){var t=this;e.on("available",function(){},"#body-container")}},{ATTRS:{bodyContent:{value:'<div id="body-container" />'},inputs:[],outputs:[]}})},"@VERSION@",{requires:["container"]}),YUI.add("inputex-wirable",function(e,t){var n=e.inputEx;n.BaseField=n.Field,n.Field=function(e){n.Field.superclass.constructor.call(this,e)},e.extend(n.Field,n.BaseField,{setOptions:function(t){n.Field.superclass.setOptions.call(this,t),this.options.wirable=e.Lang.isUndefined(t.wirable)?!1:t.wirable,this.options.container=t.container},render:function(){n.Field.superclass.render.call(this),this.options.wirable&&this.renderTerminal()},renderTerminal:function(){this.options.container&&(this.terminal=this.options.container.add({name:this.options.name,dir:[-1,0],alignNode:this.divEl,align:{points:["tl","lc"]}}).item(0),this.terminal.on("addWire",this.onAddWire,this,!0),this.terminal.on("removeWire",this.onRemoveWire,this,!0))},setContainer:function(e){this.options.container||this.renderTerminal(),this.options.container=e},setFieldName:function(e){this.terminal&&(this.terminal.name=e,this.terminal.el.title=e)},onAddWire:function(e,t){this.disable(),this.el.value="[wired]"},onRemoveWire:function(e,t){this.enable(),this.el.value=""}}),n.Field.groupOptions=n.BaseField.groupOptions.concat([{type:"boolean",label:"Wirable",name:"wirable",value:!1}])},"@VERSION@",{requires:["terminal","inputex-field"]}),YUI.add("inputex-wirable-fields",
function(e,t){var n=e.inputEx;n.StringField.prototype.setFieldName=function(e){this.el.name=e,this.terminal&&this.terminal.set("name",e)},n.Group.prototype.setContainer=function(e){n.Group.superclass.setContainer.call(this,e);if(this.inputs)for(var t=0;t<this.inputs.length;t++)this.inputs[t].setContainer(e)},n.ListField.prototype.setContainer=function(e){n.ListField.superclass.setContainer.call(this,e);if(this.subFields)for(var t=0;t<this.subFields.length;t++)this.subFields[t].setContainer(e)},n.ListField.prototype._addElement=n.ListField.prototype.addElement,n.ListField.prototype.addElement=function(e){var t=this._addElement(e);return t.setContainer(this.options.container),t}},"@VERSION@",{requires:["inputex-wirable","inputex-group","inputex-string","inputex-list"]}),YUI.add("layer",function(e,t){e.Layer=e.Base.create("layer",e.Widget,[e.WidgetParent,e.WiresDelegate],{initializer:function(){this.graphic=new e.Graphic({render:this.get("contentBox")})},clear:function(){this.removeAll()}},{ATTRS:{defaultChildType:{value:"Container"}}})},"@VERSION@",{requires:["widget-parent","container","wires-delegate"],skinnable:"true"}),YUI.add("straight-wire",function(e,t){e.StraightWire=function(t){e.StraightWire.superclass.constructor.apply(this,arguments)},e.StraightWire.NAME="straightwire",e.extend(e.StraightWire,e.WireBase,{_draw:function(){this.clear();var e=this.get("src").getXY(),t=this.get("tgt").getXY();this.moveTo(e[0]+6,e[1]+6),this.lineTo(t[0]+6,t[1]+6),this.end()}}),e.StraightWire.ATTRS=e.merge(e.WireBase.ATTRS,{})},"@VERSION@",{requires:["wire-base"]}),YUI.add("terminal",function(e,t){"use strict";e.Terminal=e.Base.create("terminal",e.TerminalBase,[e.TerminalDragEdit,e.TerminalScissors,e.TerminalDDGroups])},"@VERSION@",{requires:["terminal-base","terminal-dragedit","terminal-scissors","terminal-ddgroups"],skinnable:!0}),YUI.add("terminal-base",function(e,t){"use strict";e.TerminalBase=e.Base.create("terminal-base",e.Widget,[e.WidgetChild,e.WidgetPosition,e.WidgetPositionAlign,e.WiresDelegate],{renderUI:function(){var t=e.bind(function(){var e=this.get("boundingBox");e&&e.addClass(this.getClassName("show-overlay"))},this),n=e.bind(function(){var e=this.get("boundingBox");e&&e.removeClass(this.getClassName("show-overlay"))},this);this.get("boundingBox").on("mouseover",function(){e.later(300,this,t)}),this.get("boundingBox").on("mouseout",function(){e.later(300,this,n)});var r=this.get("parent").get("boundingBox").getXY(),i=this.get("offset");this.set("xy",[r[0]+i[0],r[1]+i[1]])},_onAddWire:function(e){this.get("boundingBox").addClass(this.getClassName("connected"))},_onRemoveWire:function(e){this._wires.length===0&&this.get("boundingBox").removeClass(this.getClassName("connected"))},getXY:function(){var e=this.get("parent"),t=e.get("parent"),n=t.get("boundingBox").getXY(),r=this.get("contentBox").getXY();return[r[0]-n[0]+7.5,r[1]-n[1]+7.5]}},{ATTRS:{name:{value:null},dir:{value:[0,1]},alignNode:{value:null},offset:{setter:function(e){var t=this.get("parent").get("boundingBox").getXY(),n=this.get("xy")},value:[0,0]}}})},"@VERSION@",{requires:["widget","widget-child","widget-position","widget-position-align","wire-base","wires-delegate"]}),YUI.add("terminal-ddgroups",function(e,t){e.TerminalDDGroups=function(t){e.after(this._renderUIgroups,this,"renderUI")},e.TerminalDDGroups.ATTRS={showGroups:{value:!0}},e.TerminalDDGroups.prototype={_renderUIgroups:function(){this.get("editable")&&this._renderTooltip()},_renderTooltip:function(){if(this.get("showGroups")){var t=new e.Overlay({render:this.get("boundingBox"),bodyContent:this.get("ddGroupsDrag").join(",")});t.set("align",{node:this.get("contentBox"),points:[e.WidgetPositionAlign.TC,e.WidgetPositionAlign.BC]}),t.get("contentBox").addClass(this.getClassName("dd-groups"))}}}},"@VERSION@",{requires:["terminal-dragedit"]}),YUI.add("terminal-dragedit",function(e,t){e.TerminalDragEdit=function(t){e.after(this._renderUIdragedit,this,"renderUI"),e.after(this._bindUIdragedit,this,"bindUI");var n={color:{value:"rgb(173,216,230)"},weight:{value:4},opacity:{value:1},dashstyle:{value:"none"},fill:{value:"rgb(255,255,255)"},"editwire-class":{value:e.BezierWire}};this.addAttrs(n,t)},e.TerminalDragEdit.ATTRS={editable:{value:!0},graphic:{value:null},alwaysSrc:{value:!1},ddGroupsDrag:{value:["terminal"]},ddGroupsDrop:{value:["terminal"]}},e.TerminalDragEdit.prototype={_renderUIdragedit:function(){if(this.get("editable")){this.get("contentBox").addClass(this.getClassName("editable"));var t=(new e.DD.Drag({node:this.get("contentBox"),groups:this.get("ddGroupsDrag")})).plug(e.Plugin.DDProxy,{cloneNode:!0,moveOnEnd:!1});this.drag=t;var n=new e.DD.Drop({node:this.get("contentBox"),groups:this.get("ddGroupsDrop")});n.terminal=this,this.drop=n}},_bindUIdragedit:function(){var e=this.drag;e&&(e.on("drag:start",this._onDragEditStart,this),e.on("drag:drag",this._onDragEditDrag,this),e.on("drag:drophit",this._onDragEditDrophit,this),e.on("drag:dropmiss",this._onDragEditDropmiss,this),e.on("drag:enter",this._onDragEditEnter,this),e.on("drag:exit",this._onDragEditExit,this))},_onDragEditStart:function(e){this._editwireX=e.pageX,this._editwireY=e.pageY;var t=this.get("dir"),n=this;this.get("graphic")||this.set("graphic",this.get("root").graphic);var r=this.get("parent"),i=r.get("parent"),s=i.get("boundingBox").getXY();this.drag.wire=this.get("graphic").addShape({type:this.get("editwire-class"),stroke:{weight:this.get("weight"),color:this.get("color"),opacity:this.get("opacity"),dashstyle:this.get("dashstyle"),fill:this.get("fill")},src:{getXY:function(){return[e.pageX-s[0]+7.5,e.pageY-s[1]+7.5]}},tgt:{getXY:function(){return[n._magnetX||n._editwireX-s[0]+7.5,n._magnetY||n._editwireY-s[1]+7.5]}},srcDir:t,tgtDir:[-t[0],-t[1]]})},_onDragEditDrag:function(e){this._editwireX=e.pageX,this._editwireY=e.pageY,this.drag.wire._draw()},_onDragEditDrophit:function(e){this.isValidWireTerminal(e.drop.terminal)?(e.drop.terminal.alwaysSrc?(this.drag.wire.set("src",e.drop.terminal),this.drag
.wire.set("tgt",this)):(this.drag.wire.set("src",this),this.drag.wire.set("tgt",e.drop.terminal)),this.drag.wire=null,this._magnetX=null,this._magnetY=null):this.drag.wire.destroy()},_onDragEditDropmiss:function(e){this.drag.wire.destroy(),this.drag.wire=null},_onDragEditEnter:function(e){var t=e.drop.terminal.getXY();this._magnetX=t[0],this._magnetY=t[1],this.drag.wire.set("tgtDir",e.drop.terminal.get("dir"))},_onDragEditExit:function(e){this._magnetX=null,this._magnetY=null},isValidWireTerminal:function(e){return this.get("parent")!==undefined&&this.get("parent").get("preventSelfWiring")&&e._parentNode._node==this._parentNode._node?!1:!0},destructor:function(){this.drag&&this.drag.destroy(),this.drop&&this.drop.destroy()}}},"@VERSION@",{requires:["bezier-wire","dd-drop","dd-drag","dd-proxy"]}),YUI.add("terminal-input",function(e,t){"use strict";e.TerminalInput=e.Base.create("terminal-input",e.Terminal,[],{getClassName:function(e){return"yui3-terminal-"+e}},{ATTRS:{dir:{value:[-0.3,0]},ddGroupsDrag:{value:["input"]},ddGroupsDrop:{value:["output"]}}})},"@VERSION@",{requires:["terminal"]}),YUI.add("terminal-output",function(e,t){"use strict";e.TerminalOutput=e.Base.create("terminal-output",e.Terminal,[],{getClassName:function(e){return"yui3-terminal-"+e}},{ATTRS:{dir:{value:[.3,0]},ddGroupsDrag:{value:["output"]},ddGroupsDrop:{value:["input"]}}})},"@VERSION@",{requires:["terminal"]}),YUI.add("terminal-scissors",function(e,t){e.TerminalScissors=function(t){e.after(this._renderUIScissors,this,"renderUI"),e.after(this._bindUIScissors,this,"bindUI")},e.TerminalScissors.ATTRS={},e.TerminalScissors.prototype={_renderUIScissors:function(){this.get("editable")&&this._renderScissors()},_bindUIScissors:function(){this.get("editable")&&this._scissorsOverlay.get("boundingBox").on("click",this.destroyWires,this)},_renderScissors:function(){this._scissorsOverlay=new e.Overlay({}),this._scissorsOverlay.get("contentBox").addClass(this.getClassName("scissors"));var t=this.get("xy"),n=this.get("dir");console.log(n),this._scissorsOverlay.set("x",t[0]+n[0]*40),this._scissorsOverlay.set("y",t[1]+n[1]*40),this._scissorsOverlay.render(this.get("boundingBox"))}}},"@VERSION@",{requires:["overlay"],skinnable:!0}),YUI.add("textarea-container",function(e,t){e.TextareaContainer=e.Base.create("textarea-container",e.Container,[],{SERIALIZABLE_ATTRS:e.Container.prototype.SERIALIZABLE_ATTRS.concat(["value"])},{ATTRS:{value:{getter:function(){return this.getStdModNode(e.WidgetStdMod.BODY).one("textarea").get("value")},setter:function(e){this.set("bodyContent","<textarea>"+e+"</textarea>")}},bodyContent:{value:"<textarea />"}}})},"@VERSION@",{requires:["container"]}),YUI.add("widget-icons",function(e,t){e.WidgetIcons=function(t){e.after(this._renderUIicons,this,"renderUI")},e.WidgetIcons.ATTRS={icons:{value:[]}},e.WidgetIcons.prototype={_renderUIicons:function(){e.Array.each(this.get("icons"),e.bind(this._renderUIicon,this))},_renderUIicon:function(t){var n=e.Node.create('<span class="yui3-widget-icons-icon '+this.getClassName("icon")+" "+t.className+'" title="'+t.title+'"></span>');n.on("click",e.bind(this[t.click],this)),n.appendTo(this.get("contentBox"))}}},"@VERSION@",{requires:[],skinnable:!0}),YUI.add("wire-base",function(e,t){e.WireBase=function(t){e.WireBase.superclass.constructor.apply(this,arguments)},e.WireBase.NAME="wirebase",e.extend(e.WireBase,e.Path,{initializer:function(){e.WireBase.superclass.initializer.apply(this,arguments);var t=this.get("src"),n=this.get("tgt");t&&t.get&&this.set("srcDir",t.get("dir")),n&&n.get&&this.set("tgtDir",n.get("dir")),t&&e.Lang.isFunction(t.addWire)&&t.addWire(this),n&&e.Lang.isFunction(n.addWire)&&n.addWire(this)},bindUI:function(){e.ArrowWire.superclass.bindUI.call(this),this.on("srcChange",function(e){this.set("srcDir",e.newVal.get("dir"))},this),this.on("tgtChange",function(e){this.set("tgtDir",e.newVal.get("dir"))},this)},destroy:function(){e.WireBase.superclass.destroy.apply(this,arguments);var t=this.get("src"),n=this.get("tgt");t&&e.Lang.isFunction(t.removeWire)&&t.removeWire(this),n&&e.Lang.isFunction(n.removeWire)&&n.removeWire(this)},_draw:function(){},getOtherTerminal:function(e){return e===this.get("src")?this.get("tgt"):this.get("src")},SERIALIZABLE_ATTRS:["src","tgt"],toJSON:function(){return{}}}),e.WireBase.ATTRS=e.merge(e.Path.ATTRS,{src:{value:null,setter:function(t){return t&&e.Lang.isFunction(t.addWire)&&t.addWire(this),t}},tgt:{value:null,setter:function(t){return t&&e.Lang.isFunction(t.addWire)&&t.addWire(this),t}},srcDir:{validator:e.Lang.isArray,value:[1,0]},tgtDir:{validator:e.Lang.isArray,valueFn:function(){var e=this.get("srcDir");return[-e[0],-e[1]]}}})},"@VERSION@",{requires:["graphics"],skinnable:!0}),YUI.add("wireit-app",function(e,t){function n(t){function i(e){var t;if(t=r[e])delete r[e],u();return t}function s(){var e="",t=4;while(t--)e+=((1+Math.random())*65536|0).toString(16).substring(1);return e}function o(t){return t?r[t]:e.Object.values(r)}function u(){n&&n.setItem(t,e.JSON.stringify(r))}function a(t){var n=t.toJSON(),i=t.idAttribute;return e.Lang.isValue(n[i])||(n[i]=s()),r[n[i]]=n,u(),n}var n;t||e.error("No storage key specified."),e.config.win.localStorage&&(n=e.config.win.localStorage);var r=e.JSON.parse(n&&n.getItem(t)||"{}");return function(t,n,r){var s=e.Model&&this instanceof e.Model;switch(t){case"create":case"update":r(null,a(this));return;case"read":r(null,o(s&&this.get("id")));return;case"delete":r(null,i(s&&this.get("id")));return}}}e.WiringModel=e.Base.create("wiringModel",e.Model,[],{sync:n("wireit-app")},{ATTRS:{id:{value:null},name:{value:""},containers:{value:[]},description:{value:""},wires:{value:[]}}}),e.WiringModelList=e.Base.create("wiringModelList",e.ModelList,[],{sync:n("wireit-app"),model:e.WiringModel}),e.WiringListView=e.Base.create("wiringListView",e.View,[],{template:e.Handlebars.compile(e.one("#t-wiring-list").getContent()),initializer:function(){},render:function(){var e=this.template({wirings:this.get("modelList"
).toJSON()});return this.get("container").setContent(e),this}}),e.ContainerType=e.Base.create("containerModel",e.Model,[],{idAttribute:"name"},{ATTRS:{name:{value:null},description:{value:null},config:{value:null}}}),e.ContainerTypeList=e.Base.create("containerTypeList",e.ModelList,[],{model:e.ContainerType}),e.EditorView=e.Base.create("editorView",e.View,[],{template:e.Handlebars.compile(e.one("#t-editor").getContent()),events:{"#wiring-save-btn":{click:"saveWiring"}},render:function(){var t=this.template({containerTypes:this.get("containerTypes").toJSON()});this.get("container").setContent(t);var n=this;return this.get("container").all(".containerType-name").each(function(t){var r=(new e.DD.Drag({node:t,groups:["containerType"]})).plug(e.Plugin.DDProxy,{cloneNode:!0,moveOnEnd:!1});r._containerTypeName=t._node.attributes["app-container-name"].value,r.on("drag:drophit",function(e){n._addContainerFromName(e.drag._containerTypeName,{x:e.drag.lastXY[0],y:e.drag.lastXY[1]})})}),this._renderLayer(),this},_renderLayer:function(){this.layer=new e.Layer({height:500});var t=new e.DD.Drop({node:this.layer.get("contentBox"),groups:["containerType"]}),n=this.get("model");n&&this.setWiring(n),this.layer.render(this.get("container").one("#layer-container"))},saveWiring:function(t){var n={name:e.one("#wiring-name").get("value")||"Unnamed"};n.containers=[],e.Array.each(this.layer._items,function(e){n.containers.push({containerType:e.containerTypeName,config:e.toJSON()})}),n.wires=[];var r=this.layer;e.Array.each(this.layer._wires,function(e){var t=e.get("src"),i=e.get("tgt");n.wires.push({src:{container:r._items.indexOf(t.get("parent")),terminal:t.get("name")},tgt:{container:r._items.indexOf(i.get("parent")),terminal:i.get("name")},config:e.toJSON()})}),this.get("model")?this.get("model").setAttrs(n):this.set("model",new e.WiringModel(n)),this.get("model").save();var i=e.Node.create('<div class="alert-message bg-warning" style="width: 300px; z-index: 10001;"><p>Saved !</p></div>').appendTo(document.body),s=new e.Anim({node:i,duration:.5,easing:e.Easing.easeOut,from:{xy:[400,-50]},to:{xy:[400,2]}});s.on("end",function(){e.later(1e3,this,function(){(new e.Anim({node:i,duration:.5,easing:e.Easing.easeOut,to:{xy:[400,-50]}})).run()})}),s.run()},setWiring:function(t){var n=this,r=this.layer;e.Array.each(t.get("containers"),function(r){n._addContainerFromName(r.containerType,r.config),e.on("available",function(n){e.one("#wiring-name").set("value",t.get("name"))},"#wiring-name")}),e.Array.each(t.get("wires"),function(t){if(!t.src||!t.tgt)return;var n=r.item(t.src.container),i=n.getTerminal(t.src.terminal),s=r.item(t.tgt.container),o=s.getTerminal(t.tgt.terminal),u=r.graphic.addShape({type:e.BezierWire,stroke:{weight:4,color:"rgb(173,216,230)"},src:i,tgt:o})}),e.later(1e3,this,function(){r.redrawAllWires()})},_addContainerFromName:function(t,n){var r=this.get("containerTypes").getById(t),i=e.mix({},r.get("config"));i=e.mix(i,n),this.layer.add(i);var s=this.layer.item(this.layer.size()-1);s.containerTypeName=t}},{ATTRS:{containerTypes:{value:null}}}),e.WireItApp=new e.Base.create("contributorsApp",e.App,[],{views:{editorPage:{type:e.EditorView},wiringListPage:{type:e.WiringListView}},initializer:function(){this.on("navigate",this.indicateLoading),this.once("ready",function(e){this.hasRoute(this.getPath())?this.dispatch():this.showWiringListPage()})},indicateLoading:function(e){this.get("activeView").get("container").addClass("loading")},handleWiring:function(e,t,n){var r=e.params.wiring,i=this.get("modelList"),s=i.getById(r);this.set("wiring",s),n()},showEditorPage:function(){this.showView("editorPage",{containerTypes:this.get("containerTypes"),wirings:this.get("modelList"),model:this.get("wiring")})},blankEditorPage:function(){this.showView("editorPage",{containerTypes:this.get("containerTypes"),wirings:this.get("modelList"),model:null})},showWiringListPage:function(){var t=new e.WiringModelList;t.load(),this.set("modelList",t),this.showView("wiringListPage",{modelList:this.get("modelList")})}},{ATTRS:{containerTypes:{value:new e.ContainerTypeList},modelList:{value:new e.WiringModelList},wiring:{value:null},routes:{value:[{path:"/",callback:"showWiringListPage"},{path:"/wirings/:wiring/*",callback:"handleWiring"},{path:"/wirings/:wiring/edit",callback:"showEditorPage"},{path:"/wirings/new",callback:"blankEditorPage"}]}}})},"@VERSION@",{requires:["app","handlebars","model","model-list","json","view","layer","bezier-wire","anim"]}),YUI.add("wires-delegate",function(e,t){e.WiresDelegate=function(e){this._wires=[],this.publish("addWire"),this.publish("removeWire"),this.on("*:addWire",this._onAddWire,this),this.on("*:removeWire",this._onRemoveWire,this)},e.WiresDelegate.ATTRS={},e.WiresDelegate.prototype={_onAddWire:function(e){var t=e;while(!!t._event)t=t.details[0];this.addWire(t)},_onRemoveWire:function(e){var t=e;while(!!t._event)t=t.details[0];this.removeWire(t)},addWire:function(t){var n=e.Array.indexOf(this._wires,t);n==-1&&(this._wires.push(t),this.fire("addWire",t))},removeWire:function(t){var n=e.Array.indexOf(this._wires,t);if(n!=-1){var r=this._wires;this._wires=[];var i=this._wires;e.Array.each(r,function(e){e!=t&&i.push(e)}),this.fire("removeWire",t)}},destroyWires:function(){this._wires&&e.Array.each(this._wires,function(e){e.destroy()})},getConnected:function(){var e=[];if(this._wires)for(var t=0,n=this._wires.length;t<n;t++)e.push(this._wires[t].getOtherTerminal(this));return e},redrawAllWires:function(){this._wires&&e.Array.each(this._wires,function(e){e._draw()})},destructor:function(){this.destroyWires()}}},"@VERSION@",{requires:["wire-base"]}),YUI.add("wireit-all",function(e,t){},"@VERSION@",{skinnable:!0});
