<html>
<head>
  <title>WireIt WiringEditor Builder</title>
  <meta http-equiv='Content-Type' content='text/html; charset=utf-8' />

  <!-- YUI CSS -->
  <link rel='stylesheet' type='text/css' href='../../lib/yui/reset-fonts/reset-fonts.css'>
  <link rel='stylesheet' type='text/css' href='../../lib/yui/assets/skins/sam/skin.css'>

  <!-- InputEx CSS -->

  <link type='text/css' rel='stylesheet' href='../../lib/inputex/css/inputEx.css' />

  <style>
h1 {
	margin: 20px;
	font-size: 14pt;
	font-weight: bold;
}
#mainBox {
background-color:#EEEEFF;
border:1px solid #9999FF;
margin:50px;
padding:10px;
}

div.inputEx-Group.WireIt-Container-Group {
	margin-left: 135px;
}
  </style>
</head>

<body class='yui-skin-sam'>
	
	 <div id='mainBox'>
			<h1>Language Builder</h1>
			<div id='formContainer'></div>
	 </div>

<!-- YUI Library -->
<script type='text/javascript' src='../../lib/yui/utilities/utilities.js'></script>
<script type='text/javascript' src='../../lib/yui/container/container-min.js'></script>
<script type='text/javascript' src='../../lib/yui/json/json-min.js'></script>
<script type='text/javascript' src='../../lib/yui/button/button-min.js'></script>
<script type='text/javascript' src='../../lib/yui/calendar/calendar-min.js'></script>

<!-- InputEx -->
<script src='../../lib/inputex/js/inputex.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/Visus.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/Field.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/StringField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/RadioField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/CombineField.js'  type='text/javascript'></script>

<script src='../../lib/inputex/js/Group.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/Form.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/CheckBox.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/ColorField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/EmailField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/HiddenField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/PasswordField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/Textarea.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/UrlField.js'  type='text/javascript'></script>

<script src='../../lib/inputex/js/fields/IntegerField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/NumberField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/ListField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/SelectField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/RTEField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/UneditableField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/PairField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/InPlaceEdit.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/SliderField.js'  type='text/javascript'></script>

<script src='../../lib/inputex/js/fields/TimeField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/DateField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/DatePickerField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/DateTimeField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/ext/UpperCaseField/UpperCaseField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/ext/VectorField/VectorField.js'  type='text/javascript'></script>
<script src='../../lib/inputex/js/fields/TypeField.js'  type='text/javascript'></script>

<!-- To load some demos: -->
<script src='../logicGates/logicGates.js'  type='text/javascript'></script>
<script src='../WiringEditor/demo.js'  type='text/javascript'></script>

<script>

YAHOO.inputEx.spacerUrl = "../../lib/inputex/images/space.gif";

var WireIt = {};
WireIt.Builder = {
	
	form: null,
	
	init: function() {
		try {
			formDef.inputParams.parentEl = 'formContainer';
			this.form = inputEx(formDef); 
			//this.form.setValue(demoLanguage);
			this.form.setValue(logicGatesLang);
		} catch(ex) {
			console.log(ex);
		}
	},
	
	generateWiringEditor: function() {
		var html = [
			"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">",
			"<html>",
			"<head>",
			"<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>",
			"<title>WireIt - WiringEditor</title>",
			"",
			"<!-- YUI -->",
			"<link rel='stylesheet' type='text/css' href='../../lib/yui/reset-fonts-grids/reset-fonts-grids.css' />",
			"<link rel='stylesheet' type='text/css' href='../../lib/yui/assets/skins/sam/skin.css' />",
			"",
			"<!-- InputEx CSS -->",
			"<link type='text/css' rel='stylesheet' href='../../lib/inputex/css/inputEx.css' />",
			"",
			"<!-- WireIt CSS -->",
			"<link rel='stylesheet' type='text/css' href='../../css/WireIt.css' />",
			"<link rel='stylesheet' type='text/css' href='../../css/WireItEditor.css' />",
			"",
			"<!-- YUI -->",
			"<scr"+"ipt type='text/javascript' src='../../lib/yui/utilities/utilities.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../lib/yui/resize/resize-min.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../lib/yui/layout/layout-min.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../lib/yui/container/container-min.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../lib/yui/json/json-min.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../lib/yui/button/button-min.js'></scr"+"ipt>",
			"",
			"<!-- YUI-RPC -->",
			"<scr"+"ipt type='text/javascript' src='../../lib/yui-rpc.js'></scr"+"ipt>",
			"",
			"<!-- InputEx with wirable options (WirableField-beta) -->",
			"<scr"+"ipt src='../../lib/inputex/js/inputex.js'  type='text/javascript'></scr"+"ipt>",
			"<scr"+"ipt src='../../lib/inputex/js/Field.js'  type='text/javascript'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../js/util/inputex/WirableField-beta.js'></scr"+"ipt>",
			"<scr"+"ipt src='../../lib/inputex/js/Group.js'  type='text/javascript'></scr"+"ipt>",
			"<scr"+"ipt src='../../lib/inputex/js/Visus.js'  type='text/javascript'></scr"+"ipt>",
			"<scr"+"ipt src='../../lib/inputex/js/fields/StringField.js'  type='text/javascript'></scr"+"ipt>",
			"<scr"+"ipt src='../../lib/inputex/js/fields/Textarea.js'  type='text/javascript'></scr"+"ipt>",
			"<scr"+"ipt src='../../lib/inputex/js/fields/SelectField.js'  type='text/javascript'></scr"+"ipt>",
			"<scr"+"ipt src='../../lib/inputex/js/fields/EmailField.js'  type='text/javascript'></scr"+"ipt>",
			"<scr"+"ipt src='../../lib/inputex/js/fields/UrlField.js'  type='text/javascript'></scr"+"ipt>",
			"<scr"+"ipt src='../../lib/inputex/js/fields/ListField.js'  type='text/javascript'></scr"+"ipt>",
			"<scr"+"ipt src='../../lib/inputex/js/fields/CheckBox.js'  type='text/javascript'></scr"+"ipt>",
			"<scr"+"ipt src='../../lib/inputex/js/fields/ColorField.js'  type='text/javascript'></scr"+"ipt>",
			"<scr"+"ipt src='../../lib/inputex/js/fields/InPlaceEdit.js'  type='text/javascript'></scr"+"ipt>",
			"<scr"+"ipt src='../../lib/inputex/js/fields/TypeField.js'  type='text/javascript'></scr"+"ipt>",
			"",
			"<!-- WireIt -->",
			"<!--[if IE]><script type='text/javascript' src='../../lib/excanvas.js'></scr"+"ipt><![endif]-->",
			"<scr"+"ipt type='text/javascript' src='../../js/WireIt.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../js/CanvasElement.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../js/Wire.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../js/Terminal.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../js/util/DD.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../js/util/DDResize.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../js/Container.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../js/Layer.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../js/util/inputex/FormContainer-beta.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../js/ImageContainer.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../js/LayerMap.js'></scr"+"ipt>",
			"<scr"+"ipt type='text/javascript' src='../../js/WiringEditor.js'></scr"+"ipt>",
			"<scr"+"ipt>",
			"// InputEx needs a correct path to this image",
			"inputEx.spacerUrl = '/inputex/trunk/images/space.gif';",
			
			"var myLanguage = "+YAHOO.lang.JSON.stringify(this.form.getValue())+";",
			
			"YAHOO.util.Event.onDOMReady( function() {",
			"	new WireIt.WiringEditor(myLanguage); ",
			"});",
			"</scr"+"ipt>",
			"</head>",

			"<body class='yui-skin-sam'>",

			"	<div id='top'>",
			"		<div class='logo'>WiringEditor</a></div>",
			"		<div id='toolbar'></div>",
			"		<div class='topright'>",
			"			<span>Hello there !</span> | ",
			"			<a href='../..'>back to WireIt</a>",
			"		</div>",
			"	</div>",
			"	<div id='left'>",
			"	</div>",
			"	<div id='right'>",
			"		<h2>Properties</h2>",
			"		<div id='propertiesForm'></div>",
			"		<h2>Minimap</h2>",
			"		<div id='layerMap'></div>",
			"	</div>",

			"	<div id='center'>",
			"	</div>",

			"	<div id='helpPanel'>",
			"	    <div class='hd'>Some help here</div>",
			"	    <div class='bd'>",
			"	        You asked for some help ?",
			"	Hello !",
			"	    </div>",
			"	</div>",
			"</body>",
			"</html>"
		];

	   // Center popup
	   var Posx = screen.width /2;
	   var Posy = screen.height /2;
	   Posx -= (this.windowWidth/2);
	   Posy -= (this.windowHeight/2);

	   var formPage = window.open("",'InputExForm','left='+Posx+',top='+Posy+
																									 ',width=850,height=600,toolbar=no,scrollbars,resizable=yes');

	   formPage.document.write(html.join("\n"));
	   formPage.document.close();
	}
	
};
YAHOO.util.Event.onDOMReady(WireIt.Builder.init, WireIt.Builder, true);


var formDef = {
	"type": "form",
	"inputParams": {
		
			"buttons": [
				{"type":"button", "value": "Create !", "onClick": (function() { WireIt.Builder.generateWiringEditor(); }) }
			],
			
			"fields" : [
				{
					"type": "string",
					"inputParams": {
						"label": "Language Name",
						"name": "languageName"
					}
				},
				{
					"type": "string",
					"inputParams": {
						"label": "SMD url",
						"name": "smdUrl",
						"value": "../../backend/php/WiringEditor.smd"
					}
				},
				{
					"type": "list",
					"inputParams": {
						"name": "propertiesFields",
						"label": "Properties",
						"elementType": {
							"type": "type",
							"inputParams": {
							}
						}
					}
				},
				{
					"type" : "list",
					"inputParams" : {
						"label" : "Modules",
						"name" : "modules",
						"listAddLabel": "Add a new module",
						"elementType" : {
							"type" : "group",
							"inputParams" : {
								"legend" : "",
								"fields" : [
									{
										"type" : "string",
										"inputParams" : {
											"label" : "Name",
											"name" : "name",
											"typeInvite" : "name",
											"value" : ""
										}
									},
									{
										"type" : "group",
										"inputParams" : {
											"className": "inputEx-Group WireIt-Container-Group",
											"legend" : "Container options",
								   		"collapsible": true,
											"collapsed": true,
											"name": "container",
											"fields" : [
												{
													"type" : "select",
													"inputParams" : {
														"label" : "Type",
														"name" : "xtype",
														"selectValues" : [
															"WireIt.Container",
															"WireIt.ImageContainer",
															"WireIt.FormContainer"
														],
														"selectOptions" : [

														],
														"value" : "WireIt.Container"
													}
												},
												{
													"type" : "string",
													"inputParams" : {
														"label" : "Image",
														"name" : "image",
														"value" : ""
													}
												},
												{
													"type" : "url",
													"inputParams" : {
														"label" : "Icon",
														"name" : "icon"
													}
												},
												{
													"type" : "list",
													"inputParams" : {
														"label" : "Fields",
														"name" : "fields",
														"elementType": {
															"type": "type",
															"inputParams": {
															}
														}
													}
												},
												{
													"type" : "list",
													"inputParams" : {
														"label" : "Terminals",
														"name" : "terminals",
														"elementType" : {
															"type" : "group",
															"inputParams" : {
																"legend" : "Terminal",
														   	"collapsible": true,
																"fields" : [
																	{
																		"type" : "string",
																		"inputParams" : {
																			"label" : "Name",
																			"name" : "name"
																		}
																	},
																	{
																		"type" : "vector",
																		"inputParams" : {
																			"label" : "Direction",
																			"name" : "direction"
																		}
																	},
																	{
																		"type" : "vector",
																		"inputParams" : {
																			"label" : "Position",
																			"name" : "offsetPosition"
																		}
																	},
																	{
																		"type": "group",
																		"inputParams": {
																			"name": "ddConfig",
																			"fields": [
																				{
																					"type": "string",
																					"inputParams": {
																						"name": "type",
																						"label": "Terminal type"
																					}
																				},
																				{
																					"type": "list",
																					"inputParams": {
																						"name": "allowedTypes",
																						"label": "Allowed types",
																						"elementType": {
																							"type":"string",
																							"inputParams":{}
																						}
																					}
																				},
																				{
																					"type": "integer",
																					"inputParams": {
																						"name": "nMaxWires",
																						"label": "Maximum wire number"
																					}
																				}
																			]
																		}
																	}
																],
																"value" : {
																	"name" : "",
																	"direction" : ["",""],
																	"offsetPosition" : ["",""]
																}
															}
														},
														"value" : []
													}
												}
											],
											"value" : {
												"xtype" : "WireIt.Container",
												"image" : "",
												"terminals" : []
											}
										}
									}
								]
							}
						},
						"value" : []
					}
				}
			]
		}
};

</script>
</body>
</html>